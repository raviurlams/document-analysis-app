"use strict";(self.webpackChunkdocument_analysis_app=self.webpackChunkdocument_analysis_app||[]).push([[543],{8543:(X,m,a)=>{a.r(m),a.d(m,{DocumentAnalysisModule:()=>N});var d=a(177),h=a(9417),u=a(8498),t=a(4438),g=a(8141),C=a(1626);let f=(()=>{class n{constructor(e){this.http=e,this._documents=(0,t.vPA)([]),this._currentDocument=(0,t.vPA)(null),this.documents=this._documents.asReadonly(),this.currentDocument=this._currentDocument.asReadonly(),this.loadDocuments()}setCurrentDocument(e){this._currentDocument.set(e)}uploadDocument(e){const o=new FormData;return o.append("file",e),o.append("fileName",e.name),o.append("fileType",e.type),o.append("fileSize",e.size.toString()),console.log("Uploading file to server:",e.name),this.http.post("/api/documents/upload",o).pipe((0,g.M)({next:i=>{console.log("Upload successful, updating documents list"),this._documents.update(c=>[i,...c]),this._currentDocument.set(i)},error:i=>{console.error("Upload error:",i)}}))}analyzeDocument(e){return this.http.post(`/api/documents/${e}/analyze`,{}).pipe((0,g.M)(o=>{const i=this._currentDocument();if(i&&i.id===e){const c={...i,analysis:o};this._currentDocument.set(c)}this._documents.update(c=>c.map(s=>s.id===e?{...s,analysis:o}:s))}))}loadDocuments(){this.http.get("/api/documents").subscribe({next:e=>{console.log("Loaded documents:",e.length),this._documents.set(e)},error:e=>console.error("Failed to load documents",e)})}static{this.\u0275fac=function(o){return new(o||n)(t.KVO(C.Qq))}}static{this.\u0275prov=t.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var _=a(8834),r=a(5596),F=a(9213),p=a(105);function D(n,l){if(1&n){const e=t.RV6();t.j41(0,"a",8),t.bIt("click",function(){const i=t.eBV(e).$implicit,c=t.XpG();return t.Njj(c.selectDocument(i))}),t.j41(1,"mat-icon",9),t.EFF(2,"description"),t.k0s(),t.j41(3,"span",10),t.EFF(4),t.k0s(),t.j41(5,"span",11),t.EFF(6),t.nI1(7,"date"),t.k0s()()}if(2&n){let e;const o=l.$implicit,i=t.XpG();t.AVh("active",(null==(e=i.currentDocument())?null:e.id)===o.id),t.R7$(4),t.JRh(o.fileName),t.R7$(2),t.JRh(t.i5U(7,4,o.uploadDate,"medium"))}}function x(n,l){if(1&n&&(t.j41(0,"div",18)(1,"h4"),t.EFF(2,"Text Content"),t.k0s(),t.j41(3,"div",19)(4,"pre"),t.EFF(5),t.k0s()()()),2&n){let e;const o=t.XpG(3);t.R7$(5),t.JRh(null==(e=o.currentDocument())||null==e.analysis?null:e.analysis.extractedText)}}function b(n,l){if(1&n&&(t.j41(0,"mat-list-item")(1,"span",10),t.EFF(2),t.k0s(),t.j41(3,"span",10),t.EFF(4),t.k0s()()),2&n){const e=l.$implicit;t.R7$(2),t.Lme("",e.type,": ",e.value,""),t.R7$(2),t.SpI("Count: ",e.count,"")}}function v(n,l){if(1&n&&(t.j41(0,"div",18)(1,"h4"),t.EFF(2,"Entities"),t.k0s(),t.j41(3,"mat-list"),t.DNE(4,b,5,3,"mat-list-item",20),t.k0s()()),2&n){let e;const o=t.XpG(3);t.R7$(4),t.Y8G("ngForOf",null==(e=o.currentDocument())||null==e.analysis?null:e.analysis.entities)}}function y(n,l){if(1&n&&(t.j41(0,"div",18)(1,"h4"),t.EFF(2,"Summary"),t.k0s(),t.j41(3,"p"),t.EFF(4),t.k0s()()),2&n){let e;const o=t.XpG(3);t.R7$(4),t.JRh(null==(e=o.currentDocument())||null==e.analysis?null:e.analysis.summary)}}function k(n,l){if(1&n&&(t.j41(0,"div",18)(1,"h4"),t.EFF(2,"Metadata"),t.k0s(),t.j41(3,"pre"),t.EFF(4),t.nI1(5,"json"),t.k0s()()),2&n){let e;const o=t.XpG(3);t.R7$(4),t.JRh(t.bMT(5,1,null==(e=o.currentDocument())||null==e.analysis?null:e.analysis.metadata))}}function M(n,l){if(1&n&&(t.j41(0,"div",15)(1,"h3"),t.EFF(2,"Analysis Results"),t.k0s(),t.j41(3,"div",16),t.DNE(4,x,6,1,"div",17)(5,v,5,1,"div",17)(6,y,5,1,"div",17)(7,k,6,3,"div",17),t.k0s()()),2&n){let e,o,i,c;const s=t.XpG(2);t.R7$(4),t.Y8G("ngIf",null==(e=s.currentDocument())||null==e.analysis?null:e.analysis.extractedText),t.R7$(),t.Y8G("ngIf",null==(o=s.currentDocument())||null==o.analysis||null==o.analysis.entities?null:o.analysis.entities.length),t.R7$(),t.Y8G("ngIf",null==(i=s.currentDocument())||null==i.analysis?null:i.analysis.summary),t.R7$(),t.Y8G("ngIf",null==(c=s.currentDocument())||null==c.analysis?null:c.analysis.metadata)}}function j(n,l){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),t.EFF(4),t.k0s(),t.j41(5,"mat-card-subtitle"),t.EFF(6),t.nI1(7,"date"),t.k0s()(),t.j41(8,"mat-card-content")(9,"div",12)(10,"button",13),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.analyzeDocument(i.currentDocument().id))}),t.EFF(11," Analyze Document "),t.k0s()(),t.DNE(12,M,8,4,"div",14),t.k0s()()()}if(2&n){let e,o;const i=t.XpG();t.R7$(4),t.JRh(null==(e=i.currentDocument())?null:e.fileName),t.R7$(2),t.SpI(" Uploaded on ",t.i5U(7,3,null==(o=i.currentDocument())?null:o.uploadDate,"full")," "),t.R7$(6),t.Y8G("ngIf",i.hasAnalysis())}}function P(n,l){1&n&&(t.j41(0,"mat-card")(1,"mat-card-content")(2,"div",21)(3,"mat-icon"),t.EFF(4,"description"),t.k0s(),t.j41(5,"h3"),t.EFF(6,"No document selected"),t.k0s(),t.j41(7,"p"),t.EFF(8,"Select a document from the list or upload a new one to get started"),t.k0s()()()())}let O=(()=>{class n{constructor(e){this.documentService=e,this.documents=(0,t.EWP)(()=>this.documentService.documents()),this.currentDocument=(0,t.EWP)(()=>this.documentService.currentDocument())}ngOnInit(){}analyzeDocument(e){this.documentService.analyzeDocument(e).subscribe({next:o=>{console.log("Analysis completed",o)},error:o=>{console.error("Analysis failed",o)}})}selectDocument(e){this.documentService.setCurrentDocument(e)}hasAnalysis(){return!!this.currentDocument()?.analysis}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(f))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-document-view"]],decls:15,vars:3,consts:[["noDocument",""],[1,"container"],[1,"grid-container"],[1,"sidebar"],["mat-list-item","",3,"active","click",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","routerLink","/document-analysis/upload",1,"upload-btn"],[1,"content"],[4,"ngIf","ngIfElse"],["mat-list-item","",3,"click"],["matListIcon",""],["matLine",""],["matLine","",1,"doc-date"],[1,"document-actions"],["mat-raised-button","","color","primary",3,"click"],["class","analysis-results",4,"ngIf"],[1,"analysis-results"],[1,"tab-container"],["class","tab-content",4,"ngIf"],[1,"tab-content"],[1,"text-content"],[4,"ngFor","ngForOf"],[1,"no-document"]],template:function(o,i){if(1&o&&(t.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2"),t.EFF(4,"List Of Documents"),t.k0s(),t.j41(5,"mat-nav-list"),t.DNE(6,D,8,7,"a",4),t.k0s(),t.j41(7,"button",5)(8,"mat-icon"),t.EFF(9,"cloud_upload"),t.k0s(),t.EFF(10," Upload New Document "),t.k0s()(),t.j41(11,"div",6),t.DNE(12,j,13,6,"div",7)(13,P,9,0,"ng-template",null,0,t.C5r),t.k0s()()()),2&o){const c=t.sdS(14);t.R7$(6),t.Y8G("ngForOf",i.documents()),t.R7$(6),t.Y8G("ngIf",i.currentDocument())("ngIfElse",c)}},dependencies:[d.Sq,d.bT,u.Wk,_.$z,r.RN,r.m2,r.MM,r.Lc,r.dh,F.An,p.jt,p._L,p.YE,d.TG,d.vh],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:300px 1fr;gap:20px}.sidebar[_ngcontent-%COMP%]{background:#fff;border-radius:8px;padding:20px;height:-moz-fit-content;height:fit-content}.sidebar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0}.upload-btn[_ngcontent-%COMP%]{width:100%;margin-top:20px}.content[_ngcontent-%COMP%]{min-height:500px}.doc-date[_ngcontent-%COMP%]{font-size:12px;color:#666}.document-actions[_ngcontent-%COMP%]{margin-bottom:20px}.analysis-results[_ngcontent-%COMP%]{margin-top:20px}.tab-container[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:4px;padding:16px}.tab-content[_ngcontent-%COMP%]{margin-bottom:20px}.tab-content[_ngcontent-%COMP%]:last-child{margin-bottom:0}.tab-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-top:0;color:#3f51b5;border-bottom:1px solid #e0e0e0;padding-bottom:8px}.text-content[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto;background:#f5f5f5;padding:16px;border-radius:4px}.text-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{white-space:pre-wrap;word-wrap:break-word;margin:0}.no-document[_ngcontent-%COMP%]{text-align:center;padding:40px 20px}.no-document[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ccc;margin-bottom:16px}.no-document[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#666;margin-bottom:8px}.no-document[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#999}@media (max-width: 768px){.grid-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.sidebar[_ngcontent-%COMP%]{order:2}.content[_ngcontent-%COMP%]{order:1}}"]})}}return n})();var E=a(7038),I=a(5416);const R=["fileInput"];function T(n,l){1&n&&(t.j41(0,"div")(1,"p"),t.EFF(2,"Click to select a file or drag and drop"),t.k0s(),t.j41(3,"p",11),t.EFF(4,"PDF, JPG, PNG, TXT"),t.k0s()())}function G(n,l){if(1&n&&(t.j41(0,"p",14),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.JRh(e.formatFileSize(e.selectedFile.size))}}function $(n,l){if(1&n&&(t.j41(0,"p",15),t.EFF(1),t.k0s()),2&n){const e=t.XpG(2);t.R7$(),t.SpI("Type: ",e.selectedFile.type,"")}}function S(n,l){if(1&n&&(t.j41(0,"p"),t.EFF(1),t.k0s(),t.DNE(2,G,2,1,"p",12)(3,$,2,1,"p",13)),2&n){const e=t.XpG();t.R7$(),t.SpI("Selected file: ",null==e.selectedFile?null:e.selectedFile.name,""),t.R7$(),t.Y8G("ngIf",e.selectedFile),t.R7$(),t.Y8G("ngIf",e.selectedFile)}}function U(n,l){if(1&n&&(t.j41(0,"div",16)(1,"p")(2,"strong"),t.EFF(3,"Debug Info:"),t.k0s()(),t.j41(4,"p"),t.EFF(5),t.k0s(),t.j41(6,"p"),t.EFF(7),t.k0s(),t.j41(8,"p"),t.EFF(9),t.k0s(),t.j41(10,"p"),t.EFF(11),t.nI1(12,"date"),t.k0s()()),2&n){const e=t.XpG();t.R7$(5),t.SpI("File name: ",e.selectedFile.name,""),t.R7$(2),t.SpI("File size: ",e.selectedFile.size," bytes"),t.R7$(2),t.SpI("File type: ",e.selectedFile.type,""),t.R7$(2),t.SpI("Last modified: ",t.i5U(12,4,e.selectedFile.lastModified,"medium"),"")}}const w=[{path:"",component:O},{path:"upload",component:(()=>{class n{constructor(e,o,i){this.documentService=e,this.loadingService=o,this.snackBar=i,this.selectedFile=null,this.isLoading=(0,t.EWP)(()=>this.loadingService.isLoading())}onFileSelected(e){const o=e.target.files[0];console.log("File selected:",o),o&&this.isValidFileType(o)?this.selectedFile=o:(this.selectedFile=null,this.snackBar.open("Please select a valid PDF, image, or text file","Close",{duration:3e3}))}uploadDocument(){console.log("Upload button clicked"),this.selectedFile?(console.log("Uploading file:",this.selectedFile.name),this.documentService.uploadDocument(this.selectedFile).subscribe({next:e=>{console.log("Upload successful:",e),this.clearFileSelection(),this.snackBar.open("Document uploaded successfully","Close",{duration:3e3,panelClass:["success-snackbar"]})},error:e=>{console.error("Upload failed",e),this.snackBar.open("Upload failed. Please try again.","Close",{duration:3e3,panelClass:["error-snackbar"]})}})):(console.log("No file selected"),this.snackBar.open("Please select a file first","Close",{duration:3e3}))}triggerFileInput(){this.fileInput.nativeElement.click()}clearFileSelection(){this.selectedFile=null,this.fileInput.nativeElement.value=""}isValidFileType(e){const i=["application/pdf","image/jpeg","image/png","text/plain"].includes(e.type);return console.log("File type validation:",e.type,i),i}formatFileSize(e){if(0===e)return"0 Bytes";const c=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,c)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][c]}static{this.\u0275fac=function(o){return new(o||n)(t.rXU(f),t.rXU(E.U),t.rXU(I.UG))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-document-upload"]],viewQuery:function(o,i){if(1&o&&t.GBs(R,5),2&o){let c;t.mGM(c=t.lsd())&&(i.fileInput=c.first)}},decls:30,vars:6,consts:[["fileInput",""],["fileSelected",""],[1,"container"],[1,"upload-area",3,"click"],["type","file","accept",".pdf,.jpg,.jpeg,.png,.txt","hidden","",3,"change"],[1,"upload-icon"],[4,"ngIf","ngIfElse"],["class","debug-info",4,"ngIf"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-button","",3,"click","disabled"],["mat-button","","color","warn",3,"click","disabled"],[1,"file-types"],["class","file-size",4,"ngIf"],["class","file-type",4,"ngIf"],[1,"file-size"],[1,"file-type"],[1,"debug-info"]],template:function(o,i){if(1&o){const c=t.RV6();t.j41(0,"div",2)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),t.EFF(4,"Upload Document"),t.k0s(),t.j41(5,"mat-card-subtitle"),t.EFF(6,"Supported formats: PDF, JPEG, PNG, TXT"),t.k0s()(),t.j41(7,"mat-card-content")(8,"div",3),t.bIt("click",function(){return t.eBV(c),t.Njj(i.triggerFileInput())}),t.j41(9,"input",4,0),t.bIt("change",function(B){return t.eBV(c),t.Njj(i.onFileSelected(B))}),t.k0s(),t.j41(11,"mat-icon",5),t.EFF(12,"cloud_upload"),t.k0s(),t.DNE(13,T,5,0,"div",6)(14,S,4,3,"ng-template",null,1,t.C5r),t.k0s(),t.DNE(16,U,13,7,"div",7),t.k0s(),t.j41(17,"mat-card-actions")(18,"button",8),t.bIt("click",function(){return t.eBV(c),t.Njj(i.uploadDocument())}),t.j41(19,"mat-icon"),t.EFF(20,"cloud_upload"),t.k0s(),t.EFF(21," Upload Document "),t.k0s(),t.j41(22,"button",9),t.bIt("click",function(){return t.eBV(c),t.Njj(i.triggerFileInput())}),t.j41(23,"mat-icon"),t.EFF(24,"folder_open"),t.k0s(),t.EFF(25," Select Different File "),t.k0s(),t.j41(26,"button",10),t.bIt("click",function(){return t.eBV(c),t.Njj(i.clearFileSelection())}),t.j41(27,"mat-icon"),t.EFF(28,"cancel"),t.k0s(),t.EFF(29," Clear Selection "),t.k0s()()()()}if(2&o){const c=t.sdS(15);t.R7$(13),t.Y8G("ngIf",!i.selectedFile)("ngIfElse",c),t.R7$(3),t.Y8G("ngIf",i.selectedFile),t.R7$(2),t.Y8G("disabled",!i.selectedFile||i.isLoading()),t.R7$(4),t.Y8G("disabled",i.isLoading()),t.R7$(4),t.Y8G("disabled",!i.selectedFile)}},dependencies:[d.bT,_.$z,r.RN,r.YY,r.m2,r.MM,r.Lc,r.dh,F.An,d.vh],styles:[".upload-area[_ngcontent-%COMP%]{border:2px dashed #ccc;border-radius:8px;padding:40px 20px;text-align:center;cursor:pointer;transition:border-color .3s}.upload-area[_ngcontent-%COMP%]:hover{border-color:#3f51b5}.file-types[_ngcontent-%COMP%], .file-size[_ngcontent-%COMP%]{font-size:12px;color:#666}.container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:20px}.upload-area[_ngcontent-%COMP%]{border:2px dashed #ccc;border-radius:12px;padding:40px 20px;text-align:center;cursor:pointer;transition:all .3s ease;margin-bottom:20px}.upload-area[_ngcontent-%COMP%]:hover{border-color:#3f51b5;background-color:#f5f5f5}.upload-area[_ngcontent-%COMP%]:active{border-color:#303f9f;background-color:#e8eaf6}.upload-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#3f51b5;margin-bottom:16px}.file-types[_ngcontent-%COMP%]{font-size:12px;color:#666;margin:0}.file-size[_ngcontent-%COMP%], .file-type[_ngcontent-%COMP%]{font-size:12px;color:#666;margin:4px 0 0}.debug-info[_ngcontent-%COMP%]{margin-top:20px;padding:15px;background-color:#f5f5f5;border-radius:8px;border-left:4px solid #ff9800}.debug-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0;font-size:12px}.debug-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#ff9800}mat-card-actions[_ngcontent-%COMP%]{display:flex;gap:12px;flex-wrap:wrap;justify-content:center}mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:160px}mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}@media (max-width: 600px){.container[_ngcontent-%COMP%]{padding:10px}mat-card-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:auto}.upload-area[_ngcontent-%COMP%]{padding:30px 15px}}  .success-snackbar{background-color:#4caf50!important;color:#fff!important}  .success-snackbar .mat-simple-snackbar-action{color:#fff!important}  .error-snackbar{background-color:#f44336!important;color:#fff!important}  .error-snackbar .mat-simple-snackbar-action{color:#fff!important}"]})}}return n})()}];let V=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[u.iI.forChild(w),u.iI]})}}return n})();var z=a(3733);let N=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[d.MD,V,h.X1,z.e]})}}return n})()}}]);